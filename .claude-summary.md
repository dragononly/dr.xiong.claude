# Dr-XIONG Claude 项目总结

## 项目简介
Dr-XIONG Claude 是一个 VSCode 扩展，集成 Claude AI 助手到编码环境。

## 最近更新

### 2026-02-06 - v0.8.56
- **修复聊天框空白 bug（严重回归）**
  - 问题：移除 `stream: false` 导致 API 返回流式响应，但代码按非流式处理
  - 现象：只显示"忙碌"状态，聊天框内容完全空白
  - 根因：ClaudeApiClient.ts:252 移除了 `body.stream = false;`
  - 修复：恢复 `body.stream = false;` 显式声明非流式请求
  - 影响：修复致命 UI bug，恢复正常对话功能

### 2026-02-06 - v0.8.55
- **修复 claude-opus-4.6 非流式请求 400 错误**
  - 问题：非流式请求间歇性返回 400 错误 "Improperly formed request"
  - 根因：显式设置 `stream: false` 导致某些 API 代理（如 NewAPI）处理异常
  - 修复：移除 `stream: false` 参数，使用 API 默认非流式行为
  - 修复文件：ClaudeApiClient.ts:252
  - 影响：提高非流式请求稳定性，解决间歇性错误

### 2026-02-06 - v0.8.54
- **修复 claude-opus-4.6 模型名称格式问题**
  - 问题：插件使用 `claude-opus-4-6`（连字符），API 要求 `claude-opus-4.6`（点号）
  - 修复文件：ModelSelect.vue, ClaudeSdkService.ts, handlers.ts, AIProviderFactory.ts
  - 现在可以正常调用 opus-4.6 模型

### 2026-02-06 - v0.8.53
- 添加 claude-opus-4.6 模型支持
  - ModelSelect.vue 添加 UI 选项
  - handlers.ts 的 DEFAULT_MODELS 添加模型信息
  - AIProviderFactory.ts 添加模型映射
  - ClaudeSdkService.ts 添加模型映射
  - ClaudeAgentService.ts 添加模型映射
- 新增 requestTimeout 配置（30-600秒可调）
- 新增 proxyUrl 网络代理配置
- 统一配置读取到 ~/.claude/settings.json
- 添加消息活动超时检测机制（30秒无响应自动继续）
- 优化请求超时处理
- 修复 TypeScript 类型问题

## 核心功能
- Claude AI 对话助手
- 支持模型：Opus 4.5/4.6, Sonnet 4.5, Haiku 4.5
- 集成 GLM 图片识别
- 自定义配置管理
