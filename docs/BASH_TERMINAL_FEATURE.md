# BashTerminalTool - æ–°å¢åŠŸèƒ½è¯´æ˜

## é—®é¢˜æè¿°

ä¹‹å‰ä½¿ç”¨ `bash_exec` å·¥å…·æ—¶å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
- å‘½ä»¤åœ¨åå°è¿›ç¨‹æ‰§è¡Œï¼Œç”¨æˆ·æ— æ³•çœ‹åˆ°å®æ—¶è¾“å‡º
- å‘½ä»¤å¯èƒ½å¡ä½æˆ–æ— é™å¾ªç¯ï¼Œæ— æ³•æ‰‹åŠ¨å¹²é¢„ï¼ˆCtrl+Cï¼‰
- è°ƒè¯•å›°éš¾ï¼Œæ— æ³•åœ¨ç»ˆç«¯ä¸­æ‰‹åŠ¨è¾“å…¥å‘½ä»¤

## è§£å†³æ–¹æ¡ˆ

æ–°å¢ `bash_terminal` å·¥å…·ï¼Œåœ¨ **VSCode é›†æˆç»ˆç«¯** ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿï¼š
- âœ… å®æ—¶æŸ¥çœ‹å‘½ä»¤è¾“å‡º
- âœ… æ‰‹åŠ¨ä¸­æ–­å¡ä½çš„å‘½ä»¤ï¼ˆCtrl+Cï¼‰
- âœ… åœ¨ç»ˆç«¯ä¸­ç»§ç»­è¾“å…¥å…¶ä»–å‘½ä»¤
- âœ… æ›´ç›´è§‚åœ°è°ƒè¯•é—®é¢˜

## å·¥å…·å¯¹æ¯”

### bash_execï¼ˆåå°æ‰§è¡Œï¼‰
**é€‚ç”¨äº**ï¼šç®€å•ã€å¿«é€Ÿçš„è‡ªåŠ¨åŒ–å‘½ä»¤
```typescript
// æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨
bash_exec(command="ls -la")

// Git çŠ¶æ€
bash_exec(command="git status")

// æ„å»ºé¡¹ç›®
bash_exec(command="npm run build", timeout=300000)
```

**ç‰¹ç‚¹**ï¼š
- åå°æ‰§è¡Œï¼Œä¸å ç”¨ç»ˆç«¯
- è‡ªåŠ¨æ•è·è¾“å‡º
- é€‚åˆè‡ªåŠ¨åŒ–è„šæœ¬

### bash_terminalï¼ˆå¯è§ç»ˆç«¯ï¼‰â­ æ–°å¢
**é€‚ç”¨äº**ï¼šéœ€è¦æ‰‹åŠ¨å¹²é¢„æˆ–å®æ—¶æŸ¥çœ‹çš„åœºæ™¯
```typescript
// å¯èƒ½å¡ä½çš„å®‰è£…è¿‡ç¨‹
bash_terminal(command="npm install webpack")

// éœ€è¦è°ƒè¯•çš„æ„å»º
bash_terminal(command="npm run build", terminalName="Build Debug")

// å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bash_terminal(command="npm run dev", description="å¯åŠ¨å¼€å‘æœåŠ¡å™¨")
```

**ç‰¹ç‚¹**ï¼š
- åœ¨ VSCode ç»ˆç«¯ä¸­æ‰§è¡Œ
- ç”¨æˆ·å¯ä»¥çœ‹åˆ°å®æ—¶è¾“å‡º
- ç”¨æˆ·å¯ä»¥éšæ—¶ Ctrl+C ä¸­æ–­
- ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨è¾“å…¥å‘½ä»¤
- é€‚åˆè°ƒè¯•å’Œäº¤äº’

## ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1ï¼šå®‰è£…å¯èƒ½å¡ä½çš„ä¾èµ–
```typescript
// âŒ ä¹‹å‰ï¼šå¯èƒ½åœ¨åå°å¡ä½ï¼Œæ— æ³•å¹²é¢„
bash_exec(command="npm install some-package", timeout=120000)

// âœ… ç°åœ¨ï¼šåœ¨ç»ˆç«¯æ‰§è¡Œï¼Œéšæ—¶å¯ä»¥ Ctrl+C
bash_terminal(
    command="npm install some-package",
    terminalName="NPM Install",
    description="å®‰è£…ä¾èµ–åŒ…"
)
```

### åœºæ™¯ 2ï¼šè°ƒè¯•æ„å»ºé—®é¢˜
```typescript
// âŒ ä¹‹å‰ï¼šæ„å»ºå¤±è´¥æ—¶çœ‹ä¸åˆ°è¯¦ç»†è¾“å‡º
bash_exec(command="npm run build")

// âœ… ç°åœ¨ï¼šåœ¨ç»ˆç«¯çœ‹åˆ°å®Œæ•´è¾“å‡ºï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒæ•´
bash_terminal(
    command="npm run build",
    terminalName="Build",
    description="æ„å»ºé¡¹ç›®"
)
```

### åœºæ™¯ 3ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨
```typescript
// âŒ ä¹‹å‰ï¼šéœ€è¦åœ¨åå°è¿è¡Œï¼Œæ— æ³•æŸ¥çœ‹æ—¥å¿—
bash_exec(command="npm run dev", run_in_background=true)

// âœ… ç°åœ¨ï¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°å®æ—¶æ—¥å¿—
bash_terminal(
    command="npm run dev",
    terminalName="Dev Server",
    description="å¯åŠ¨å¼€å‘æœåŠ¡å™¨"
)
```

## AI å¦‚ä½•é€‰æ‹©å·¥å…·

ç³»ç»Ÿæç¤ºè¯å·²æ›´æ–°ï¼ŒAI ä¼šæ ¹æ®åœºæ™¯æ™ºèƒ½é€‰æ‹©ï¼š

1. **ç®€å•å‘½ä»¤** â†’ `bash_exec`
   - ls, cat, echo ç­‰ç®€å•å‘½ä»¤
   - git status, git log ç­‰åªè¯»å‘½ä»¤
   - ä¸éœ€è¦äº¤äº’çš„è‡ªåŠ¨åŒ–è„šæœ¬

2. **é•¿æ—¶é—´è¿è¡Œ** â†’ `bash_exec(run_in_background=true)`
   - å¯åŠ¨æŒç»­è¿è¡Œçš„æœåŠ¡
   - ä¸éœ€è¦å®æ—¶æŸ¥çœ‹è¾“å‡º

3. **éœ€è¦æ‰‹åŠ¨å¹²é¢„** â†’ `bash_terminal` â­
   - å¯èƒ½å¡ä½çš„å‘½ä»¤
   - éœ€è¦ç”¨æˆ·è¾“å…¥çš„äº¤äº’å¼å‘½ä»¤
   - è°ƒè¯•é—®é¢˜æ—¶
   - ç”¨æˆ·æƒ³çœ‹åˆ°å®æ—¶è¾“å‡º

## æŠ€æœ¯å®ç°

### æ–‡ä»¶å˜æ›´
- **æ–°å¢**ï¼š`src/tools/bash/BashTerminalTool.ts` - å·¥å…·å®ç°
- **æ›´æ–°**ï¼š`src/tools/bash/index.ts` - å¯¼å‡ºæ–°å·¥å…·
- **æ›´æ–°**ï¼š`docs/SYSTEM_PROMPT_TEMPLATE.md` - æ·»åŠ å·¥å…·é€‰æ‹©æŒ‡å—

### æ ¸å¿ƒä»£ç 
```typescript
// åˆ›å»º VSCode ç»ˆç«¯
const terminal = vscode.window.createTerminal({
    name: terminalName,
    cwd: workingDir,
});

// æ˜¾ç¤ºç»ˆç«¯
terminal.show();

// å‘é€å‘½ä»¤
terminal.sendText(command);
```

## æµ‹è¯•å»ºè®®

1. **åŸºæœ¬åŠŸèƒ½æµ‹è¯•**
   ```typescript
   bash_terminal(command="echo 'Hello Terminal'")
   ```

2. **è¶…æ—¶æµ‹è¯•**
   ```typescript
   bash_terminal(command="sleep 5 && echo 'Done'")
   ```

3. **æ‰‹åŠ¨ä¸­æ–­æµ‹è¯•**
   - æ‰§è¡Œä¸€ä¸ªä¼šå¡ä½çš„å‘½ä»¤
   - æ‰‹åŠ¨æŒ‰ Ctrl+C
   - éªŒè¯ç»ˆç«¯æ­£å¸¸å“åº”

4. **å·¥ä½œç›®å½•æµ‹è¯•**
   ```typescript
   bash_terminal(command="pwd", cwd="/tmp")
   ```

## åç»­ä¼˜åŒ–å»ºè®®

1. **è¾“å‡ºæ•è·**ï¼šç›®å‰æ— æ³•ç›´æ¥è¯»å–ç»ˆç«¯è¾“å‡ºï¼Œæœªæ¥å¯ä»¥è€ƒè™‘ï¼š
   - ä½¿ç”¨ vscode.window.onDidWriteTerminalData ç›‘å¬è¾“å‡º
   - æˆ–åœ¨å‘½ä»¤åæ·»åŠ æ ‡è®°å¹¶ç­‰å¾…

2. **å‘½ä»¤å®Œæˆæ£€æµ‹**ï¼š
   - æ·»åŠ ç»“æŸæ ‡è®°ï¼ˆecho $?ï¼‰
   - è½®è¯¢æ£€æµ‹å‘½ä»¤æ˜¯å¦å®Œæˆ

3. **ç»ˆç«¯å¤ç”¨**ï¼š
   - æ”¯æŒå¤ç”¨ç°æœ‰ç»ˆç«¯
   - æ”¯æŒç»ˆç«¯åˆ†ç»„

4. **UI ä¼˜åŒ–**ï¼š
   - åœ¨å‰ç«¯æ˜¾ç¤ºç»ˆç«¯æŒ‰é’®
   - å¿«æ·åˆ‡æ¢åˆ°ç»ˆç«¯é¢æ¿

## æ€»ç»“

`bash_terminal` å·¥å…·è§£å†³äº†å‘½ä»¤å¡ä½æ— æ³•æ‰‹åŠ¨å¹²é¢„çš„é—®é¢˜ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿï¼š
- æ›´å¥½åœ°æ§åˆ¶å‘½ä»¤æ‰§è¡Œ
- æ›´æ–¹ä¾¿åœ°è°ƒè¯•é—®é¢˜
- æ›´çµæ´»åœ°ä½¿ç”¨ç»ˆç«¯

è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„ç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼ğŸ‰
